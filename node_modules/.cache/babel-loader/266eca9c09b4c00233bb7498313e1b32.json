{"remainingRequest":"/home/damian/spiced-finalproject/node_modules/babel-loader/lib/index.js!/home/damian/spiced-finalproject/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/damian/spiced-finalproject/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/damian/spiced-finalproject/src/views/Connect.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/damian/spiced-finalproject/src/views/Connect.vue","mtime":1563800887273},{"path":"/home/damian/spiced-finalproject/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/damian/spiced-finalproject/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/damian/spiced-finalproject/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/damian/spiced-finalproject/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// @ is an alias to /src\nimport axios from \"@/axios\";\nimport Lost from \"@/components/Lost\";\nimport Found from \"@/components/Found\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"Connect\",\n  components: {\n    Lost: Lost,\n    Found: Found\n  },\n  data: function data() {\n    //       lat: 52.52000659999999\n    // lng: 13.404953999999975\n    return {\n      center: {\n        lat: 52.52000659999999,\n        lng: 13.404953999999975\n      },\n      markers: [],\n      places: [],\n      currentPlace: null,\n      lostAnimals: [],\n      foundAnimals: [],\n      myMapMarker: {},\n      form: {\n        species: \"\",\n        status: \"\",\n        chipped: \"\",\n        lastSeen: \"\",\n        location: \"\",\n        description: \"\",\n        name: \"\",\n        age: \"\",\n        gender: \"\",\n        breed: \"\",\n        file: null\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.geolocate();\n    var self = this;\n    axios.get(\"/get-animals\").then(function (resp) {\n      resp.data.forEach(function (item) {\n        item.location = JSON.parse(item.location);\n      });\n      var lostAnimals = resp.data.filter(function (animal) {\n        return animal.status == \"lost\";\n      });\n      var foundAnimals = resp.data.filter(function (animal) {\n        return animal.status == \"found\";\n      });\n      self.lostAnimals = lostAnimals;\n      self.foundAnimals = foundAnimals;\n    });\n  },\n  methods: {\n    setPlace: function setPlace(place) {\n      this.currentPlace = place;\n    },\n    addMarker: function addMarker() {\n      if (this.currentPlace) {\n        var marker = {\n          lat: this.currentPlace.geometry.location.lat(),\n          lng: this.currentPlace.geometry.location.lng()\n        };\n        this.myMapMarker = {\n          position: marker\n        };\n        this.markers.push({\n          position: marker\n        });\n        this.places.push(this.currentPlace);\n        this.center = marker;\n        this.currentPlace = null;\n      }\n    },\n    geolocate: function geolocate() {\n      var _this = this;\n\n      navigator.geolocation.getCurrentPosition(function (position) {\n        _this.center = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n      });\n    },\n    handleSearch: function handleSearch(event) {\n      console.log(\"handleSearch\", event);\n    },\n    handleFileChange: function handleFileChange(e) {\n      this.form.file = e.target.files[0];\n    },\n    sendForm: function sendForm() {\n      var stringMarker = JSON.stringify(this.myMapMarker);\n      console.log(stringMarker);\n      var formData = new FormData();\n      formData.append(\"name\", this.form.name);\n      formData.append(\"status\", this.form.status);\n      formData.append(\"species\", this.form.species);\n      formData.append(\"chipped\", this.form.chipped);\n      formData.append(\"gender\", this.form.gender);\n      formData.append(\"breed\", this.form.breed);\n      formData.append(\"location\", stringMarker);\n      formData.append(\"description\", this.form.description);\n      formData.append(\"lastSeen\", this.form.lastSeen);\n      formData.append(\"age\", this.form.age);\n      formData.append(\"file\", this.form.file); // if you log formData and get an {}, that's ok\n\n      var self = this;\n      axios.post(\"/upload-connect\", formData).then(function (resp) {\n        //$bvModal.hide(\"uploadLostFound\");\n        console.log(\"animal from upload response\", resp.data);\n\n        if (resp.data.status == \"lost\") {\n          self.lostAnimals.push(resp.data);\n        } else {\n          self.foundAnimals.push(resp.data);\n        }\n      });\n    }\n  },\n  computed: mapState([\"userInfo\", \"verified\"])\n};",{"version":3,"sources":["Connect.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqKA;AACA,OAAA,KAAA,MAAA,SAAA;AACA,OAAA,IAAA,MAAA,mBAAA;AACA,OAAA,KAAA,MAAA,oBAAA;AACA,SAAA,QAAA,QAAA,MAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,IAAA,EAAA,IAAA;AAAA,IAAA,KAAA,EAAA;AAAA,GAFA;AAGA,EAAA,IAAA,EAAA,gBAAA;AACA;AACA;AACA,WAAA;AACA,MAAA,MAAA,EAAA;AAAA,QAAA,GAAA,EAAA,iBAAA;AAAA,QAAA,GAAA,EAAA;AAAA,OADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA,EAHA;AAIA,MAAA,YAAA,EAAA,IAJA;AAKA,MAAA,WAAA,EAAA,EALA;AAMA,MAAA,YAAA,EAAA,EANA;AAOA,MAAA,WAAA,EAAA,EAPA;AAQA,MAAA,IAAA,EAAA;AACA,QAAA,OAAA,EAAA,EADA;AAEA,QAAA,MAAA,EAAA,EAFA;AAGA,QAAA,OAAA,EAAA,EAHA;AAIA,QAAA,QAAA,EAAA,EAJA;AAKA,QAAA,QAAA,EAAA,EALA;AAMA,QAAA,WAAA,EAAA,EANA;AAOA,QAAA,IAAA,EAAA,EAPA;AAQA,QAAA,GAAA,EAAA,EARA;AASA,QAAA,MAAA,EAAA,EATA;AAUA,QAAA,KAAA,EAAA,EAVA;AAWA,QAAA,IAAA,EAAA;AAXA;AARA,KAAA;AAsBA,GA5BA;AA6BA,EAAA,OAAA,EAAA,mBAAA;AACA,SAAA,SAAA;AACA,QAAA,IAAA,GAAA,IAAA;AACA,IAAA,KAAA,CAAA,GAAA,CAAA,cAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,MAAA,IAAA,CAAA,IAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,IAAA,CAAA,QAAA,GAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AACA,OAFA;AAGA,UAAA,WAAA,GAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,UAAA,MAAA;AAAA,eAAA,MAAA,CAAA,MAAA,IAAA,MAAA;AAAA,OAAA,CAAA;AACA,UAAA,YAAA,GAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,UAAA,MAAA;AAAA,eAAA,MAAA,CAAA,MAAA,IAAA,OAAA;AAAA,OAAA,CAAA;AACA,MAAA,IAAA,CAAA,WAAA,GAAA,WAAA;AACA,MAAA,IAAA,CAAA,YAAA,GAAA,YAAA;AACA,KARA;AASA,GAzCA;AA0CA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,KADA,EACA;AACA,WAAA,YAAA,GAAA,KAAA;AACA,KAHA;AAIA,IAAA,SAJA,uBAIA;AACA,UAAA,KAAA,YAAA,EAAA;AACA,YAAA,MAAA,GAAA;AACA,UAAA,GAAA,EAAA,KAAA,YAAA,CAAA,QAAA,CAAA,QAAA,CAAA,GAAA,EADA;AAEA,UAAA,GAAA,EAAA,KAAA,YAAA,CAAA,QAAA,CAAA,QAAA,CAAA,GAAA;AAFA,SAAA;AAIA,aAAA,WAAA,GAAA;AAAA,UAAA,QAAA,EAAA;AAAA,SAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA;AAAA,UAAA,QAAA,EAAA;AAAA,SAAA;AACA,aAAA,MAAA,CAAA,IAAA,CAAA,KAAA,YAAA;AACA,aAAA,MAAA,GAAA,MAAA;AACA,aAAA,YAAA,GAAA,IAAA;AACA;AACA,KAhBA;AAiBA,IAAA,SAAA,EAAA,qBAAA;AAAA;;AACA,MAAA,SAAA,CAAA,WAAA,CAAA,kBAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA;AACA,UAAA,GAAA,EAAA,QAAA,CAAA,MAAA,CAAA,QADA;AAEA,UAAA,GAAA,EAAA,QAAA,CAAA,MAAA,CAAA;AAFA,SAAA;AAIA,OALA;AAMA,KAxBA;AAyBA,IAAA,YAzBA,wBAyBA,KAzBA,EAyBA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,cAAA,EAAA,KAAA;AACA,KA3BA;AA4BA,IAAA,gBAAA,EAAA,0BAAA,CAAA,EAAA;AACA,WAAA,IAAA,CAAA,IAAA,GAAA,CAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,KA9BA;AA+BA,IAAA,QAAA,EAAA,oBAAA;AACA,UAAA,YAAA,GAAA,IAAA,CAAA,SAAA,CAAA,KAAA,WAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,YAAA;AACA,UAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,IAAA,CAAA,IAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,QAAA,EAAA,KAAA,IAAA,CAAA,MAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,SAAA,EAAA,KAAA,IAAA,CAAA,OAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,SAAA,EAAA,KAAA,IAAA,CAAA,OAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,QAAA,EAAA,KAAA,IAAA,CAAA,MAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,OAAA,EAAA,KAAA,IAAA,CAAA,KAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,UAAA,EAAA,YAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,aAAA,EAAA,KAAA,IAAA,CAAA,WAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,UAAA,EAAA,KAAA,IAAA,CAAA,QAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,KAAA,EAAA,KAAA,IAAA,CAAA,GAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,IAAA,CAAA,IAAA,EAdA,CAeA;;AACA,UAAA,IAAA,GAAA,IAAA;AACA,MAAA,KAAA,CAAA,IAAA,CAAA,iBAAA,EAAA,QAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,6BAAA,EAAA,IAAA,CAAA,IAAA;;AACA,YAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,MAAA,EAAA;AACA,UAAA,IAAA,CAAA,WAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA;AACA,SAFA,MAEA;AACA,UAAA,IAAA,CAAA,YAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,OARA;AASA;AAzDA,GA1CA;AAqGA,EAAA,QAAA,EAAA,QAAA,CAAA,CAAA,UAAA,EAAA,UAAA,CAAA;AArGA,CAAA","sourcesContent":["<template>\n  <div class=\"connect\">\n    <div class=\"router-lost\">\n      <div class=\"links-lost\">\n        <router-link class=\"nav\" to=\"/connect/lost\">Lost</router-link> |\n        <router-link class=\"nav\" to=\"/connect/found\">Found</router-link>\n      </div>\n\n      <div id=\"lost-found-btn\">\n        <b-button\n          class=\"doggy-btn\"\n          v-if=\"userInfo.userId != null\"\n          id=\"show-btn\"\n          @click=\"$bvModal.show('uploadLostFound')\"\n        >\n          Upload Details\n        </b-button>\n      </div>\n      <div class=\"lost-box\">\n        <b-modal\n          id=\"uploadLostFound\"\n          hide-footer\n          body-bg-variant=\"secondary\"\n          header-bg-variant=\"dark\"\n          header-border-variant=\"dark\"\n        >\n          <template slot=\"modal-title\">\n            Lost & Found Uploader\n          </template>\n          <div class=\"d-block text-center\">\n            <h2>Please add a lost or found Pet</h2>\n            <form class=\"\">\n              <label for=\"spiecies\">Spiecies</label>\n              <input\n                type=\"text\"\n                name=\"spiecies\"\n                value=\"\"\n                placeholder=\"species\"\n                v-model=\"form.species\"\n              />\n              <fieldset>\n                <label for=\"status\">Status</label>\n                <input\n                  type=\"radio\"\n                  id=\"lost\"\n                  name=\"status\"\n                  value=\"lost\"\n                  v-model=\"form.status\"\n                />\n                <label for=\"lost\">Lost</label>\n                <input\n                  type=\"radio\"\n                  id=\"found\"\n                  name=\"status\"\n                  value=\"found\"\n                  v-model=\"form.status\"\n                />\n                <label for=\"found\">Found</label>\n              </fieldset>\n              <label for=\"chipped\">Chipped</label>\n              <fieldset>\n                <input\n                  type=\"radio\"\n                  id=\"chipped-yes\"\n                  name=\"chipped\"\n                  value=\"yes\"\n                  v-model=\"form.chipped\"\n                />\n                <label for=\"chipped-yes\">Yes</label>\n                <input\n                  type=\"radio\"\n                  id=\"chipped-no\"\n                  name=\"chipped\"\n                  value=\"no\"\n                  v-model=\"form.chipped\"\n                />\n                <label for=\"found\">No</label>\n              </fieldset>\n              <label for=\"lastSeen\">Last Seen</label>\n              <input type=\"date\" name=\"\" value=\"\" v-model=\"form.lastSeen\" />\n\n              <label for=\"description\">Description</label>\n              <textarea\n                name=\"description\"\n                rows=\"2\"\n                cols=\"40\"\n                placeholder=\"description\"\n                v-model=\"form.description\"\n              ></textarea>\n              <label for=\"name\">Name</label>\n              <input\n                type=\"text\"\n                name=\"name\"\n                value=\"\"\n                placeholder=\"name\"\n                v-model=\"form.name\"\n              />\n              <label for=\"gender\">Gender</label>\n              <input\n                type=\"text\"\n                name=\"gender\"\n                value=\"\"\n                placeholder=\"gender\"\n                v-model=\"form.gender\"\n              />\n              <label for=\"breed\">Breed</label>\n              <input\n                type=\"text\"\n                name=\"breed\"\n                value=\"\"\n                placeholder=\"breed\"\n                v-model=\"form.breed\"\n              />\n              <label for=\"age\">Age</label>\n              <input\n                type=\"text\"\n                name=\"age\"\n                value=\"\"\n                placeholder=\"age\"\n                v-model=\"form.age\"\n              />\n              <input\n                id=\"select-img\"\n                type=\"file\"\n                name=\"file\"\n                accept=\"image/*\"\n                @change=\"handleFileChange\"\n                class=\"inputfile\"\n              />\n            </form>\n            <label>\n              <gmap-autocomplete @place_changed=\"setPlace\"> </gmap-autocomplete>\n              <button @click=\"addMarker\">Add</button>\n            </label>\n            <gmap-map\n              :center=\"center\"\n              :zoom=\"12\"\n              style=\"width:100%;  height: 400px;\"\n            >\n              <gmap-marker\n                :key=\"index\"\n                v-for=\"(m, index) in markers\"\n                :position=\"m.position\"\n                @click=\"center = m.position\"\n              ></gmap-marker>\n            </gmap-map>\n          </div>\n          <b-button class=\"mt-3\" block v-on:click.prevent=\"sendForm\"\n            >Upload</b-button\n          >\n        </b-modal>\n      </div>\n      <Lost\n        :lostAnimals=\"lostAnimals\"\n        v-if=\"this.$route.path == '/connect/lost'\"\n      />\n      <Found\n        :foundAnimals=\"foundAnimals\"\n        v-if=\"this.$route.path == '/connect/found'\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport axios from \"@/axios\";\nimport Lost from \"@/components/Lost\";\nimport Found from \"@/components/Found\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"Connect\",\n  components: { Lost, Found },\n  data: function() {\n    //       lat: 52.52000659999999\n    // lng: 13.404953999999975\n    return {\n      center: { lat: 52.52000659999999, lng: 13.404953999999975 },\n      markers: [],\n      places: [],\n      currentPlace: null,\n      lostAnimals: [],\n      foundAnimals: [],\n      myMapMarker: {},\n      form: {\n        species: \"\",\n        status: \"\",\n        chipped: \"\",\n        lastSeen: \"\",\n        location: \"\",\n        description: \"\",\n        name: \"\",\n        age: \"\",\n        gender: \"\",\n        breed: \"\",\n        file: null\n      }\n    };\n  },\n  mounted: function() {\n    this.geolocate();\n    var self = this;\n    axios.get(\"/get-animals\").then(function(resp) {\n      resp.data.forEach(item => {\n        item.location = JSON.parse(item.location);\n      });\n      const lostAnimals = resp.data.filter(animal => animal.status == \"lost\");\n      const foundAnimals = resp.data.filter(animal => animal.status == \"found\");\n      self.lostAnimals = lostAnimals;\n      self.foundAnimals = foundAnimals;\n    });\n  },\n  methods: {\n    setPlace(place) {\n      this.currentPlace = place;\n    },\n    addMarker() {\n      if (this.currentPlace) {\n        const marker = {\n          lat: this.currentPlace.geometry.location.lat(),\n          lng: this.currentPlace.geometry.location.lng()\n        };\n        this.myMapMarker = { position: marker };\n        this.markers.push({ position: marker });\n        this.places.push(this.currentPlace);\n        this.center = marker;\n        this.currentPlace = null;\n      }\n    },\n    geolocate: function() {\n      navigator.geolocation.getCurrentPosition(position => {\n        this.center = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n      });\n    },\n    handleSearch(event) {\n      console.log(\"handleSearch\", event);\n    },\n    handleFileChange: function(e) {\n      this.form.file = e.target.files[0];\n    },\n    sendForm: function() {\n      var stringMarker = JSON.stringify(this.myMapMarker);\n      console.log(stringMarker);\n      var formData = new FormData();\n      formData.append(\"name\", this.form.name);\n      formData.append(\"status\", this.form.status);\n      formData.append(\"species\", this.form.species);\n      formData.append(\"chipped\", this.form.chipped);\n      formData.append(\"gender\", this.form.gender);\n      formData.append(\"breed\", this.form.breed);\n      formData.append(\"location\", stringMarker);\n      formData.append(\"description\", this.form.description);\n      formData.append(\"lastSeen\", this.form.lastSeen);\n      formData.append(\"age\", this.form.age);\n      formData.append(\"file\", this.form.file);\n      // if you log formData and get an {}, that's ok\n      var self = this;\n      axios.post(\"/upload-connect\", formData).then(function(resp) {\n        //$bvModal.hide(\"uploadLostFound\");\n        console.log(\"animal from upload response\", resp.data);\n        if (resp.data.status == \"lost\") {\n          self.lostAnimals.push(resp.data);\n        } else {\n          self.foundAnimals.push(resp.data);\n        }\n      });\n    }\n  },\n  computed: mapState([\"userInfo\", \"verified\"])\n};\n</script>\n\n<style src=\"../../public/style.connect.css\" scoped></style>\n"],"sourceRoot":"src/views"}]}